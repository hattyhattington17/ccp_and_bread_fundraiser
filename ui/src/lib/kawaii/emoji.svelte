<script lang="ts">
	import { tsParticles } from '@tsparticles/engine';
	import { loadAll } from '@tsparticles/all';
	import { loadEmojiShape } from '@tsparticles/shape-emoji';
	import configs from '@tsparticles/configs';
	import { onMount } from 'svelte';
	import background from '$lib/assets/kawaii/cute-anime-pastel.jpg';

	const config = configs.nyancat2;

	onMount(() => {
		console.log(background);
		loadAll(tsParticles);
		loadEmojiShape(tsParticles);

		tsParticles
			.load({
				id: 'tsparticles',
				options: {
					...config,
					fullScreen: {
						enable: true,
						zIndex: -1
					},
					background: { image: `url('${background}')`, repeat: 'no-repeat', position: 'center' },
					particles: {
						...config.particles,
						shape: {
							type: 'emoji',
							options: {
								emoji: [
									{ value: '🍬' },
									{ value: '🍭' },
									{ value: '🍫' },
									{ value: '🍩' },
									{ value: '🍪' },
									{ value: '🍰' },
									{ value: '🍦' },
									{ value: '🍧' },
									{ value: '🍨' },
									{ value: '🎂' }
								]
							}
						},
						size: {
							value: 10
						}
					}
				}
			})
			.then((container) => {
				container?.play();
				console.log('tsparticles loaded', container);
			})
			.catch((error) => {
				console.error('Error loading tsparticles', error);
			});
	});
</script>

<div id="tsparticles"></div>
